(function(domain,undefined){"use strict";function Device(){throw new Error("无法创建静态类型的实例。")}function doTapClickHandler(e){if("touchstart"==e.type){if(e.targetTouches.length>=2)return;var t=e.target,n=t.nodeName.toLowerCase(),o=t.nodeType;if(1==o&&("input"==n||"textarea"==n||"select"==n))return;for(;t&&t!=document;){if(t.classList.contains(".not-click"))return;t=t.parentNode}return isMove=!1,startT=Date.now(),identy=e.targetTouches[0].identifier,startX=e.targetTouches[0].clientX,startY=e.targetTouches[0].clientY,document.addEventListener("touchmove",doTapClickHandler,!0),document.addEventListener("touchend",doTapClickHandler,!0),document.addEventListener("touchcancel",doTapClickHandler,!0),document.activeElement&&document.activeElement.blur(),void e.preventDefault()}if("touchmove"==e.type){if(isMove)return;var r=e.changedTouches[0].clientX-startX,c=e.changedTouches[0].clientY-startY;if(threshold*threshold>=r*r+c*c)return;return void(isMove=!0)}if("touchend"==e.type){if(document.removeEventListener("touchmove",doTapClickHandler,!0),document.removeEventListener("touchend",doTapClickHandler,!0),document.removeEventListener("touchcancel",doTapClickHandler,!0),isMove)return;var i=Date.now()-startT>=holdDelay?"hold":"click",d=e.changedTouches[0],t=e.target,a=document.createEvent("MouseEvent");return a.initMouseEvent(i,!0,!0,e.view,e.detail,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),void t.dispatchEvent(a)}return"touchcancel"==e.type?(document.removeEventListener("touchmove",doTapClickHandler,!0),document.removeEventListener("touchend",doTapClickHandler,!0),void document.removeEventListener("touchcancel",doTapClickHandler,!0)):void 0}Device.isWindowsPhone=function(){return navigator.userAgent.indexOf("Windows Phone")>=0},Device.isAndroid=function(){return!Device.isAndroid&&navigator.userAgent.indexOf("Android")>=0},Device.isIOS=function(){return!Device.isWindowsPhone()&&/iP(ad|hone|od)/.test(navigator.userAgent)},Device.isIOS()||document.documentElement.classList.add("allow-native-touch"),document.documentElement.classList.contains("allow-native-touch")||(document.addEventListener("touchmove",function(e){e.preventDefault()}),document.addEventListener("touchstart",doTapClickHandler));var startX=0,startY=0,startT=0,identy=0,isMove=!1,threshold=5,holdDelay=1e3;if(typeof Page == "function" && !document.currentPage){domain.currentPage=new Page();}}(this||window));
//# sourceMappingURL=system.js.map
